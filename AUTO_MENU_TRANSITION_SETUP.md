# Настройка автоматического перехода в меню и системы бонусов

## Добавленные фичи:

### 1. Автоматический переход в меню через 3 секунды
- После победы или поражения через 3 секунды автоматически включается меню
- Игрок не может ничего кликать в это время
- При нажатии любой кнопки автоматический переход отключается

### 2. Система бонусных очков при проигрыше
- При проигрыше игроку начисляется +5 очков для click zone radius
- Бонус накапливается при каждом проигрыше
- Максимальный бонус: 50 очков (увеличение размера click zone в 1.5 раза)
- Бонус применяется ко всем головам на уровне

## Настройка сцен:

### Сцена Win.unity:
1. Добавить компонент `AutoMenuTransition` к любому GameObject
2. Настроить `delayBeforeMenu = 3` (или другое значение)
3. Убедиться что `enableAutoTransition = true`

### Сцена Lose.unity:
1. Добавить компонент `AutoMenuTransition` к любому GameObject
2. Настроить `delayBeforeMenu = 3` (или другое значение)
3. Убедиться что `enableAutoTransition = true`

### Сцена Menu.unity:
1. Добавить компонент `BonusCounterUI` к любому GameObject
2. Создать UI элементы (TextMeshProUGUI) для отображения бонусов
3. Назначить UI элементы в поля инспектора:
   - `Bonus Counter Text` - основной текст с размером click zone
   - `Session Bonus Text` - бонусы текущей сессии
   - `Total Bonus Text` - общие накопленные бонусы
4. Настроить отображение в инспекторе (какие поля показывать)

### Сцена Level.unity:
1. Добавить компонент `LevelTimer` к любому GameObject
2. Настроить `levelDuration = 30` (или другое значение)
3. Убедиться что `showTimer = true`

## Новые скрипты:

### PlayerProgress.cs
- Хранит прогресс игрока между сессиями
- Управляет бонусными очками для click zone radius
- Отслеживает бонусы текущей сессии и общие
- Singleton pattern для доступа из любой сцены

### AutoMenuTransition.cs
- Автоматический переход в меню через заданное время
- Можно отключить при нажатии кнопок
- Работает на сценах Win и Lose

### BonusCounterUI.cs
- Отображает счетчик бонусных улучшений на экране Menu
- Показывает бонусы текущей сессии и общие
- Отображает текущий размер click zone
- Использует назначенные в инспекторе UI элементы

### LevelTimer.cs
- Таймер для уровня
- Автоматически вызывает проигрыш по истечении времени
- Показывает оставшееся время на экране

## Обновленные скрипты:

### GameManager.cs
- Добавлен метод `OnLevelFailed()` для обработки проигрыша
- Автоматически начисляет бонусные очки при проигрыше
- Останавливает таймер при победе

### Head.cs
- Применяет бонусный размер click zone при создании
- Учитывает прогресс игрока из PlayerProgress

### MenuController.cs
- Отключает автоматический переход при нажатии кнопок
- Предотвращает конфликты между ручным и автоматическим переходом

## Как это работает:

1. **При проигрыше:**
   - LevelTimer вызывает GameManager.OnLevelFailed()
   - Начисляется +5 бонусных очков
   - Переход на сцену Lose
   - Через 3 секунды автоматический переход в меню

2. **При победе:**
   - GameManager.OnLevelCompleted() останавливает таймер
   - Переход на сцену Win
   - Через 3 секунды автоматический переход в меню

3. **Бонусные очки:**
   - Сохраняются в PlayerProgress между уровнями
   - Применяются к размеру коллайдера всех голов
   - Делают игру легче после нескольких проигрышей

## Тестирование:

1. Запустить уровень и дождаться проигрыша
2. Проверить что начисляются бонусные очки (+50 за проигрыш)
3. Проверить что размер click zone увеличился
4. Проверить автоматический переход в меню через 3 секунды
5. Проверить что кнопки отключают автоматический переход
6. Проверить счетчик бонусов на экране Menu
7. Проиграть несколько раз и проверить накопление бонусов 